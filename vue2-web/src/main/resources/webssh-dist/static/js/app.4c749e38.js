(function(e){function t(t){for(var o,i,a=t[0],l=t[1],c=t[2],d=0,h=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&h.push(s[i][0]),s[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var l=n[a];0!==s[l]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},s={app:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00c0":function(e,t,n){},"0a0a":function(e,t,n){},"0c06":function(e,t,n){"use strict";n("8533")},5502:function(e,t,n){"use strict";n("0a0a")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=(n("0fb7"),n("450d"),n("f529")),r=n.n(s),i=(n("6611"),n("e772")),a=n.n(i),l=(n("1f1a"),n("4e4b")),c=n.n(l),u=(n("0c67"),n("299c")),d=n.n(u),h=(n("e3ea"),n("7bc3")),p=n.n(h),m=(n("e612"),n("dd87")),f=n.n(m),g=(n("075a"),n("72aa")),b=n.n(g),v=(n("960d"),n("defb")),w=n.n(v),y=(n("bd49"),n("18ff")),k=n.n(y),T=(n("cb70"),n("b370")),S=n.n(T),$=(n("f225"),n("89a9")),x=n.n($),L=(n("de31"),n("c69e")),_=n.n(L),C=(n("a673"),n("7b31")),P=n.n(C),I=(n("adec"),n("3d2d")),O=n.n(I),j=(n("5466"),n("ecdf")),E=n.n(j),F=(n("38a0"),n("ad41")),z=n.n(F),M=(n("ae26"),n("845f")),H=n.n(M),R=(n("1951"),n("eedf")),N=n.n(R),U=(n("eca7"),n("3787")),V=n.n(U),W=(n("425f"),n("4105")),A=n.n(W),D=(n("f4f9"),n("c2cc")),K=n.n(D),q=(n("7a0f"),n("0f6c")),B=n.n(q),G=(n("a7cc"),n("df33")),J=n.n(G),X=(n("10cb"),n("f3ad")),Y=n.n(X),Q={install:function(e){e.use(Y.a),e.use(J.a),e.use(B.a),e.use(K.a),e.use(A.a),e.use(V.a),e.use(N.a),e.use(H.a),e.use(z.a),e.use(E.a),e.use(O.a),e.use(P.a),e.use(_.a),e.use(x.a),e.use(S.a),e.use(k.a),e.use(w.a),e.use(b.a),e.use(f.a),e.use(p.a),e.use(d.a),e.use(c.a),e.use(a.a),e.prototype.$message=r.a}},Z=Q,ee=(n("0fae"),n("b20f"),function(){var e=this,t=this,n=t._self._c;return n("div",{attrs:{id:"app"}},[n("el-container",[n("el-header",{staticStyle:{height:"auto"}},[n("vheader",{on:{"ssh-select":function(){e.$refs.tabs.openTerm()},"ssh-logout":function(){e.$refs.tabs.closeTabs("all")}}})],1),n("el-container",[n("el-main",{staticStyle:{padding:"0"}},[n("tabs",{ref:"tabs"})],1)],1)],1)],1)}),te=[],ne=function(){var e=this,t=e._self._c;return t("div",[t("el-row",[t("el-col",[t("el-form",{staticStyle:{"padding-top":"10px"},attrs:{inline:!0,model:e.sshInfo,rules:e.checkRules}},[t("el-form-item",{attrs:{size:"small",prop:"host"}},[t("template",{slot:"label"},[t("el-tooltip",{attrs:{effect:"dark",placement:"left"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("p",[e._v("Switch Language")])]),t("span",{on:{click:function(t){return e.handleSetLanguage(!0)}}},[e._v("Host")])])],1),t("el-input",{attrs:{placeholder:e.$t("hostTip")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("ssh-select")}},model:{value:e.sshInfo.host,callback:function(t){e.$set(e.sshInfo,"host",t)},expression:"sshInfo.host"}})],2),t("el-form-item",{attrs:{label:"Port",size:"small",prop:"port"}},[t("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:e.$t("portTip")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("ssh-select")}},model:{value:e.sshInfo.port,callback:function(t){e.$set(e.sshInfo,"port",t)},expression:"sshInfo.port"}})],1),t("el-form-item",{attrs:{label:"Username",size:"small",prop:"username"}},[t("el-input",{staticStyle:{width:"110px"},attrs:{placeholder:e.$t("nameTip")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("ssh-select")}},model:{value:e.sshInfo.username,callback:function(t){e.$set(e.sshInfo,"username",t)},expression:"sshInfo.username"}})],1),t("el-form-item",{attrs:{size:"small",prop:"password"}},[t("template",{slot:"label"},[t("el-tooltip",{attrs:{effect:"dark",placement:"left"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("p",[e._v(e._s("Switch to ".concat(this.privateKey?"Password":"PrivateKey"," login")))])]),t("span",{on:{click:function(t){0===e.sshInfo.logintype?e.sshInfo.logintype=1:e.sshInfo.logintype=0}}},[e._v(e._s(e.privateKey?"PrivateKey":"Password"))])])],1),t("el-input",{attrs:{placeholder:e.$t("inputTip")+"".concat(this.privateKey?e.$t("privateKey"):e.$t("password")),"show-password":""},nativeOn:{click:function(t){e.textareaVisible=e.privateKey},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("ssh-select")}},model:{value:e.sshInfo.password,callback:function(t){e.$set(e.sshInfo,"password",t)},expression:"sshInfo.password"}})],2),t("el-dialog",{attrs:{title:e.$t("privateKey"),visible:e.textareaVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.textareaVisible=t}}},[t("el-input",{attrs:{rows:8,type:"textarea",placeholder:e.$t("keyTip")},model:{value:e.sshInfo.password,callback:function(t){e.$set(e.sshInfo,"password",t)},expression:"sshInfo.password"}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("input",{ref:"pkFile",staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file"},on:{change:e.handleChangePKFile}}),t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.$refs.pkFile.click()}}},[e._v(e._s(e.$t("SelectFile"))+" ")]),t("el-button",{on:{click:function(t){e.sshInfo.password=""}}},[e._v(e._s(e.$t("Clear")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.textareaVisible=!1,e.$emit("ssh-select")}}},[e._v(e._s(e.$t("Connect"))+" ")])],1)],1),t("el-form-item",{attrs:{size:"small"}},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.$emit("ssh-select")}}},[e._v(e._s(e.$t("Connect")))])],1),t("el-form-item",{attrs:{size:"small"}},[t("file-list")],1),t("el-form-item",{attrs:{size:"small"}},[t("el-dropdown",{on:{command:e.handleCommand}},[t("el-button",{attrs:{type:"primary"}},[e._v(" "+e._s(e.$t("History"))+" ")]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.sshList,(function(n){return t("el-dropdown-item",{key:n.host,staticStyle:{padding:"0 5px 0 10px"},attrs:{command:n}},[e._v(" "+e._s(n.host)+" "),t("i",{staticClass:"el-icon-close",on:{click:function(t){return e.cleanHistory(n)}}})])})),1)],1)],1),t("el-form-item",{attrs:{size:"small"}},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showLogin,expression:"showLogin"}],attrs:{type:"primary",plain:""},on:{click:function(t){e.foreShowLogin=!0}}},[e._v(e._s(e.$t("login"))+" ")])],1),t("el-form-item",{attrs:{size:"small"}},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showLogout,expression:"showLogout"}],attrs:{type:"primary",plain:""},on:{click:function(t){return e.handleLogout()}}},[e._v(e._s(e.$t("logout"))+" ")])],1),t("el-form-item",{attrs:{size:"small"}},[t("el-select",{attrs:{placeholder:e.$t("PleaseSelLang")},on:{change:function(t){return e.handleSetLanguage()}},model:{value:e.selLang,callback:function(t){e.selLang=t},expression:"selLang"}},e._l(e.langOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),t("el-dialog",{attrs:{title:e.$t("loginFormTitle"),visible:e.showLogin,width:"30%","show-close":!1},on:{"update:visible":function(t){e.showLogin=t}}},[t("el-form",{ref:"loginForm",attrs:{model:e.login.form,rules:e.login.checkRules}},[t("el-form-item",{attrs:{label:e.$t("Username"),prop:"username"}},[t("el-input",{attrs:{placeholder:e.$t("usernameTip")},model:{value:e.login.form.username,callback:function(t){e.$set(e.login.form,"username",t)},expression:"login.form.username"}})],1),t("el-form-item",{attrs:{label:e.$t("Password"),prop:"password"}},[t("el-input",{attrs:{placeholder:e.$t("passwordTip"),type:"password"},model:{value:e.login.form.password,callback:function(t){e.$set(e.login.form,"password",t)},expression:"login.form.password"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handleLogin}},[e._v(e._s(e.$t("login")))])],1)],1)],1)},oe=[],se=n("5530"),re=(n("a9e3"),n("d3b7"),n("159b"),n("a434"),n("313d"),n("0eb6"),n("b7ef"),n("8bd4"),n("e9c4"),n("ac1f"),n("841c"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("b64b"),n("81b2"),n("99af"),n("c7eb")),ie=n("1da1"),ae=(n("b0c0"),n("cee4")),le=n("2f62"),ce=n("a925"),ue=n("4897"),de=n.n(ue),he=n("b2d6"),pe=n.n(he),me=n("f0d9"),fe=n.n(me),ge={OK:"OK",Cancel:"Cancel",History:"History",Lock:"Lock",Unlock:"Unlock",Size:"Size",Name:"Name",Copy:"Copy",Upload:"Upload",Rename:"Rename",FullScreen:"FullScreen",Close:"Close",CloseLeft:"Close Left",CloseRight:"Close Right",CloseOther:"Close Other",CloseAll:"Close All",FileBrowser:"File Browser",ModifiedTime:"Modified Time",Clear:"Clear",Connect:"Connect",password:"password",privateKey:"privateKey",SelectFile:"SelectFile",uploadPath:"uploadPath",to:"to",uploading:"uploading",uploadFile:"upload File",uploadFolder:"upload Folder",hostTip:"please input remote host",portTip:"input port",nameTip:"please input username",inputTip:"please input ",keyTip:"please paste privateKey content",wsClose:"websocket connection disconnected!",notCloseWindows:"please do not close windows",unlockClose:"please unlock to close tab",clickSelectFile:"click to select upload file",clickSelectFolder:"click to select upload folder",uploadFinish:" upload finish",login:"login",logout:"logout",loginFormTitle:"please login",PermissionsString:"permissions",CreateTime:"add time",GroupName:"group",OwnerName:"owner",Username:"Username",Password:"Password",usernameTip:"please type your username",passwordTip:"please type your password",pleaseSelect:"please select",PleaseSelLang:"please select language"},be={OK:"确定",Cancel:"取消",History:"历史记录",Lock:"锁定",Unlock:"解锁",Size:"大小",PermissionsString:"权限",GroupName:"所属组",OwnerName:"所有者",CreateTime:"创建时间",Name:"名字",Copy:"复制",Upload:"上传",Rename:"重命名",FullScreen:"全屏",Close:"关闭",CloseLeft:"关闭左边",CloseRight:"关闭右边",CloseOther:"关闭其他",CloseAll:"关闭所有",FileBrowser:"文件管理",ModifiedTime:"修改时间",Clear:"清空",Connect:"连接",password:"密码",privateKey:"密钥",hostTip:"请输入远程host地址",portTip:"请输入端口",nameTip:"请输入用户名",inputTip:"请输入",keyTip:"请粘贴私钥内容",SelectFile:"选择文件",wsClose:"websocket连接已断开!",uploadPath:"当前上传目录",uploadFinish:"上传完成",to:"到",uploading:"正在上传",notCloseWindows:"请勿关闭窗口",unlockClose:"请解锁后再来关闭",clickSelectFile:"点击选择文件",clickSelectFolder:"点击选择文件夹",uploadFile:"上传文件",uploadFolder:"上传文件夹",login:"登录",logout:"注销",loginFormTitle:"请输入账号登录",Username:"用户名",Password:"密码",usernameTip:"请输入用户名",passwordTip:"请输入密码",pleaseSelect:"请选择",PleaseSelLang:"请选择语言"};o["default"].use(ce["a"]);var ve={en:Object(se["a"])(Object(se["a"])({},ge),pe.a),zh:Object(se["a"])(Object(se["a"])({},be),fe.a)};function we(){var e=localStorage.getItem("language");if(e)return e;for(var t=(navigator.language||navigator.browserLanguage).toLowerCase(),n=Object.keys(ve),o=0,s=n;o<s.length;o++){var r=s[o];if(t.indexOf(r)>-1)return r}return"zh"}var ye=new ce["a"]({locale:we(),messages:ve,silentTranslationWarn:!0});de.a.i18n((function(e,t){return ye.t(e,t)}));var ke=ye,Te={sshInfo:{host:"192.168.2.100",username:"root",port:22,password:"",logintype:0},sshList:Object.prototype.hasOwnProperty.call(localStorage,"sshList")?localStorage.getItem("sshList"):null,termList:[],currentTab:{},shouldValidToken:!0,token:"",projectExchangeToken:void 0,projectHeaderParams:[],ctx:void 0,language:we()},Se=(n("5319"),{sshReq:function(e){return window.btoa('{\n            "username":"'.concat(e.sshInfo.username,'",\n            "ipaddress":"').concat(e.sshInfo.host,'",\n            "port":').concat(e.sshInfo.port,',\n            "password":"').concat(e.sshInfo.password.replace(/[\n]/g,"\\n"),'",\n            "logintype":').concat(void 0===e.sshInfo.logintype?0:e.sshInfo.logintype,"\n        }"))},token:function(e){return e.token},ctx:function(e){return e.ctx},projectHeaderParams:function(e){return e.projectHeaderParams}}),$e={setLanguage:function(e,t){var n=e.commit;n("SET_LANGUAGE",t)},setToken:function(e,t){var n=e.commit;n("SET_TOKEN",t)}},xe={SET_PASS:function(e,t){e.sshInfo.password=t},SET_LIST:function(e,t){e.sshList=t,localStorage.setItem("sshList",t)},SET_TERMLIST:function(e,t){e.termList=t},SET_SSH:function(e,t){e.sshInfo.host=t.host,e.sshInfo.username=t.username,e.sshInfo.port=t.port,e.sshInfo.logintype=t.logintype,void 0!==t.password&&(e.sshInfo.password=t.password)},SET_TAB:function(e,t){e.currentTab=t},SET_LANGUAGE:function(e,t){e.language=t,localStorage.setItem("language",t)},SET_TOKEN:function(e,t){e.token=t}};o["default"].use(le["a"]);var Le=new le["a"].Store({state:Te,getters:Se,mutations:xe,actions:$e});function _e(e){switch(e){case 400:r.a.error("请求出错");break;case 403:r.a.warning({message:"拒绝访问"});break;case 404:r.a.warning({message:"请求错误,未找到该资源"});break;case 500:r.a.warning({message:"服务端错误"});break}return e>=200&&e<300}function Ce(){var e=""+(Le.getters.ctx?Le.getters.ctx:"");return console.log("baseUrl:"+e),e}function Pe(e){var t=Le.getters.projectHeaderParams;if(t&&t.length>0)for(var n=0;n<t.length;++n){var o=t[n];e.headers[o["name"]]=o["value"]}}var Ie=ae["a"].create({timeout:8e3,baseURL:Ce(),validateStatus:_e});Ie.interceptors.request.use(function(){var e=Object(ie["a"])(Object(re["a"])().mark((function e(t){return Object(re["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ce();case 2:return t.baseURL=e.sent,Pe(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),Ie.interceptors.response.use((function(e){return e.data}),(function(e){return void 0===e.response&&r.a.error("连接服务器失败"),Promise.reject(e.response)}));var Oe=Ie;function je(e,t){return Oe.get("/webssh/check?sshInfo=".concat(e,"&token=").concat(t))}function Ee(){return Oe.get("/webssh/shouldVerifyToken")}function Fe(e,t){var n="";return t&&(n=t),Oe.get("/webssh/projectHeader/params?token=".concat(e,"&projectExchangeToken=").concat(n))}function ze(e){return Oe({url:"/webssh/login",method:"post",data:e})}function Me(e){return Oe.get("/webssh/logout?token=".concat(e))}var He=function(){var e=this,t=e._self._c;return t("div",{staticClass:"MainContainer"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.getFileList(),e.dialogVisible=!0}}},[e._v(e._s(e.$t("FileBrowser")))]),t("el-dialog",{attrs:{title:e.$t("FileBrowser")+"("+this.$store.state.sshInfo.host+")",visible:e.dialogVisible,top:"5vh",width:e.dialogWidth},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-row",[t("el-col",{attrs:{span:this.pathSpan}},[t("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getFileList()}},model:{value:e.currentPath,callback:function(t){e.currentPath=t},expression:"currentPath"}})],1),t("el-col",{attrs:{span:6}},[t("el-button-group",[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-arrow-up"},on:{click:function(t){return e.upDirectory()}}}),t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:function(t){return e.getFileList()}}}),t("el-dropdown",{on:{click:function(t){return e.openUploadDialog()},command:e.handleUploadCommand}},[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-upload"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"file"}},[e._v(e._s(e.$t("uploadFile")))]),t("el-dropdown-item",{attrs:{command:"folder"}},[e._v(e._s(e.$t("uploadFolder")))])],1)],1)],1),t("el-dialog",{attrs:{"custom-class":"uploadContainer",title:e.$t(this.titleTip),visible:e.uploadVisible,"append-to-body":"",width:e.uploadWidth},on:{"update:visible":function(t){e.uploadVisible=t}}},[t("el-upload",{ref:"upload",attrs:{multiple:"",drag:"",action:e.uploadUrl,data:e.uploadData,"before-upload":e.beforeUpload,"on-progress":e.uploadProgress,"on-success":e.uploadSuccess}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v(e._s(e.$t(this.selectTip)))]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(this.uploadTip))])])],1)],1)],1),t("el-table",{attrs:{data:e.fileList,height:e.clientHeight},on:{"row-click":e.rowClick}},[t("el-table-column",{attrs:{label:e.$t("Name"),width:e.nameWidth,sortable:"","sort-method":e.nameSort},scopedSlots:e._u([{key:"default",fn:function(n){return[!0===n.row.dir?t("p",{staticClass:"el-icon-folder",staticStyle:{color:"#0c60b5",cursor:"pointer"}},[e._v(" "+e._s(n.row.name))]):!1===n.row.dir?t("p",{staticClass:"el-icon-document",staticStyle:{cursor:"pointer"}},[e._v(" "+e._s(n.row.name))]):e._e()]}}])}),t("el-table-column",{attrs:{label:e.$t("PermissionsString"),prop:"permissionsString"}}),t("el-table-column",{attrs:{label:e.$t("OwnerName"),prop:"ownerName"}}),t("el-table-column",{attrs:{label:e.$t("GroupName"),prop:"groupName"}}),t("el-table-column",{attrs:{label:e.$t("Size"),prop:"size"}}),t("el-table-column",{attrs:{label:e.$t("ModifiedTime"),prop:"modifyTime",sortable:"",width:"150"}})],1)],1)],1)},Re=[];n("fb6a"),n("a15b");function Ne(e,t,n){return Oe.get("/webssh/file/list?path=".concat(e,"&sshInfo=").concat(t,"&token=").concat(n),{timeout:3e4})}var Ue={newWs:function(e){if(e.url){var t=new WebSocket(e.url),n=Le.getters.projectHeaderParams;return n&&n.length,t}return null}},Ve=Ue,We={name:"FileList",data:function(){return{uploadVisible:!1,dialogVisible:!1,fileList:[],downloadFilePath:"",currentPath:"",pathSpan:18,clientHeight:0,selectTip:"clickSelectFile",titleTip:"uploadFile",uploadTip:"",dialogWidth:"70%",uploadWidth:"32%",nameWidth:120,progressPercent:0}},created:function(){this.resizeDialog()},mounted:function(){var e=this;this.resizeDialog(),window.onresize=function(){e.resizeDialog()}},computed:Object(se["a"])(Object(se["a"])({},Object(le["b"])(["currentTab"])),{},{uploadUrl:function(){return"".concat("".concat(location.origin),"/webssh/file/upload")},uploadData:function(){return{sshInfo:this.$store.getters.sshReq,path:this.currentPath,token:this.$store.getters.token}}}),watch:{currentTab:function(){this.fileList=[],this.currentPath=this.currentTab&&this.currentTab.path}},methods:{resizeDialog:function(){var e=document.body.clientWidth;this.clientHeight=document.body.clientHeight-200,this.pathSpan=18,e<600?(this.dialogWidth="98%",this.uploadWidth="100%",this.nameWidth=120,this.pathSpan=16,this.clientHeight=document.body.clientHeight-205):e>=600&&e<1e3?(this.dialogWidth="80%",this.uploadWidth="59%",this.nameWidth=220):(this.dialogWidth="50%",this.uploadWidth="28%",this.nameWidth=220)},openUploadDialog:function(){this.uploadTip="".concat(this.$t("uploadPath"),": ").concat(this.currentPath),this.uploadVisible=!0},handleUploadCommand:function(e){"folder"===e?(this.selectTip="clickSelectFolder",this.titleTip="uploadFolder"):(this.selectTip="clickSelectFile",this.titleTip="uploadFile"),this.openUploadDialog();var t="folder"===e,n=this.webkitdirectorySupported();n?this.$nextTick((function(){var e=document.getElementsByClassName("el-upload__input")[0];e&&(e.webkitdirectory=t)})):t&&this.$message.warning("当前浏览器不支持")},webkitdirectorySupported:function(){return"webkitdirectory"in document.createElement("input")},beforeUpload:function(e){this.uploadTip="".concat(this.$t("uploading")," ").concat(e.name," ").concat(this.$t("to")," ").concat(this.currentPath,", ").concat(this.$t("notCloseWindows"),".."),this.uploadData.id=e.uid;var t=e.webkitRelativePath;return this.uploadData.dir=t?t.substring(0,t.lastIndexOf("/")):"",!0},uploadSuccess:function(e,t){this.uploadTip="".concat(t.name).concat(this.$t("uploadFinish"),"!")},uploadProgress:function(e,t){e.percent=e.percent/2,t.percentage=t.percentage/2;var n=this.$store.getters.token;if(t.startWsProgree=!1,!t.startWsProgree&&e.percent>=10&&(t.startWsProgree=!0),50===e.percent){var o=Ve.newWs({url:"".concat("http:"===location.protocol?"ws":"wss","://").concat(location.host).concat(""+(Le.getters.ctx?Le.getters.ctx:""),"/webssh/file/progress?token=").concat(n,"&id=").concat(t.uid)});o.onmessage=function(e){t.percentage=(t.size+Number(e.data))/(2*t.size)*100},o.onclose=function(){console.log(Date(),"onclose")},o.onerror=function(){console.log(Date(),"onerror")}}},nameSort:function(e,t){return e.Name>t.Name},rowClick:function(e){e.dir?(this.currentPath="/"===this.currentPath.charAt(this.currentPath.length-1)?this.currentPath+e.name:this.currentPath+"/"+e.name,this.getFileList()):(this.downloadFilePath="/"===this.currentPath.charAt(this.currentPath.length-1)?this.currentPath+e.name:this.currentPath+"/"+e.name,this.downloadFile())},getFileList:function(){var e=this;return Object(ie["a"])(Object(re["a"])().mark((function t(){var n;return Object(re["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.currentPath=e.currentPath.replace(/\/+/g,"/"),""===e.currentPath&&(e.currentPath="/"),t.next=4,Ne(e.currentPath,e.$store.getters.sshReq,e.$store.state.token);case 4:n=t.sent,"success"===n.msg?(null===n.data.list?e.fileList=[]:e.fileList=n.data.list,e.updatePath(e.currentPath)):(e.fileList=[],e.$message.error(n.msg),e.updatePath("/"));case 6:case"end":return t.stop()}}),t)})))()},upDirectory:function(){if("/"!==this.currentPath){var e=this.currentPath.split("/");e=""===e[e.length-1]?e.slice(0,e.length-2):e.slice(0,e.length-1),this.currentPath=1===e.length?"/":e.join("/"),this.getFileList()}},downloadFile:function(){var e=this.$store.getters.token,t="".concat(location.origin),n="".concat(t,"/webssh/file/download?path=").concat(this.downloadFilePath,"&sshInfo=").concat(this.$store.getters.sshReq,"&token=").concat(e);window.open(n)},updatePath:function(e){for(var t=this.$store.state.termList,n=0;n<t.length;++n)if(t[n].name===this.currentTab.name){t[n].path=e;break}this.$store.commit("SET_TERMLIST",t)}}},Ae=We,De=(n("7cd7"),n("2877")),Ke=Object(De["a"])(Ae,He,Re,!1,null,null,null),qe=Ke.exports,Be={components:{"file-list":qe},data:function(){return{selLang:"",langOptions:[{label:"中文",value:"zh"},{label:"English",value:"en"}],foreShowLogin:!1,loginLoading:!1,textareaVisible:!1,login:{form:{username:"test",password:"test@123!"},checkRules:{username:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"password is required"}]}},checkRules:{host:[{required:!0,trigger:"blur"}],port:[{required:!0,trigger:"blur",type:"number",transform:function(e){return Number(e)}}],username:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"value is required"}]}}},methods:{handleLogout:function(){var e=this;e.foreShowLogin=!1;var t=e.$store.getters.token;e.$emit("ssh-logout"),e.$store.dispatch("setToken",""),t&&""!=t&&Me(t).then((function(e){console.log("logout info:"+e)}))},handleProjectTokens:function(e,t){var n=e.$store.state.projectExchangeToken;Fe(t,n).then((function(t){if("200"==t.code){var n=t.data;n&&(e.$store.state.projectHeaderParams=n)}}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&!e.loginLoading&&(e.loginLoading=!0,ze(e.login.form).then((function(t){if(e.loginLoading=!1,"200"==t.code){var n=t.data.token;n&&(e.$store.dispatch("setToken",n),e.handleProjectTokens(e,n))}})))})),setTimeout((function(){e.loginLoading&&(e.loginLoading=!1)}),10)},handleSetLanguage:function(e){var t;if(this.selLang&&!e)t=this.selLang;else{var n=we();t="zh"===n?"en":"zh"}this.$i18n.locale=t,this.$store.dispatch("setLanguage",t)},handleCommand:function(e){this.$store.commit("SET_SSH",e),void 0===e.password&&this.$store.commit("SET_PASS",""),this.$emit("ssh-select")},cleanHistory:function(e){var t=this.sshList;t.forEach((function(n,o){n.host===e.host&&t.splice(o,1)})),this.$store.commit("SET_LIST",window.btoa(JSON.stringify(t)))},handleChangePKFile:function(e){var t=e.target.files[0];if(t){var n=this.sshInfo,o=new FileReader;o.onload=function(e){n.password=e.target.result},o.readAsText(t)}},getRequestParam:function(e){if(console.log("request query:"+location.search),e=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(location.search))return decodeURIComponent(e[1])}},mounted:function(){if(this.selLang=we(),this.sshList.length>0){var e=this.sshList[this.sshList.length-1];this.$store.commit("SET_SSH",e),void 0===e.password&&this.$store.commit("SET_PASS","")}var t=this,n=t.getRequestParam("prefix");console.log("contextPath:"+n),n&&(t.$store.state.ctx=n);var o=t.getRequestParam("projectExchangeToken");console.log("projectExchangeToken:"+o),o&&(t.$store.state.projectExchangeToken=o),Ee().then((function(e){t.$store.state.shouldValidToken=e.data,t.$store.state.shouldValidToken||t.handleProjectTokens(t,"")}))},computed:Object(se["a"])(Object(se["a"])({},Object(le["b"])(["sshInfo"])),{},{privateKey:function(){return 1===this.sshInfo.logintype},showLogin:function(){var e=this.$store.state.shouldValidToken,t=this.$store.state.token;return!(!e||""!=t&&null!=t&&void 0!=t)||!!this.foreShowLogin},showLogout:function(){var e=this.$store.state.shouldValidToken,t=this.$store.state.token;return!(!e||""==t||null==t||void 0==t)},sshList:function(){var e=this.$store.state.sshList;return null===e?[]:JSON.parse(window.atob(e))}})},Ge=Be,Je=Object(De["a"])(Ge,ne,oe,!1,null,"4b81dbf2",null),Xe=Je.exports,Ye=function(){var e=this,t=e._self._c;return t("div",[t("el-tabs",{attrs:{type:"card"},on:{"tab-remove":e.removeTab,"tab-click":e.clickTab},model:{value:e.currentTerm,callback:function(t){e.currentTerm=t},expression:"currentTerm"}},e._l(e.termList,(function(e,n){return t("el-tab-pane",{key:e.name,attrs:{label:e.label,name:e.name,closable:e.closable}},[t("terminal",{ref:e.name,refInFor:!0,attrs:{id:"Terminal"+n}})],1)})),1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.contextMenuVisible,expression:"contextMenuVisible"}]},[t("ul",{staticClass:"contextmenu",style:{left:e.left+"px",top:e.top+"px"}},[t("li",{on:{click:function(t){return e.copyTab()}}},[t("el-button",{attrs:{type:"text",size:"mini"}},[e._v(e._s(e.$t("Copy")))])],1),t("li",{on:{click:function(t){return e.lockTab()}}},[t("el-button",{attrs:{type:"text",size:"mini"}},[e._v(e._s(e.lockButtonShow(e.menuTab)))])],1),t("li",{on:{click:function(t){return e.setScreenfull()}}},[t("el-button",{attrs:{type:"text",size:"mini"}},[e._v(e._s(e.$t("FullScreen")))])],1),t("li",{on:{click:function(t){return e.removeTab(e.menuTab)}}},[t("el-button",{attrs:{type:"text",size:"mini"}},[e._v(e._s(e.$t("Close")))])],1),t("el-divider"),t("li",{on:{click:function(t){return e.renameTab()}}},[t("el-button",{attrs:{type:"text",size:"mini"}},[e._v(e._s(e.$t("Rename")))])],1),t("el-divider"),t("li",{on:{click:function(t){return e.closeTabs("left")}}},[t("el-button",{attrs:{type:"text",size:"mini"}},[e._v(e._s(e.$t("CloseLeft")))])],1),t("li",{on:{click:function(t){return e.closeTabs("right")}}},[t("el-button",{attrs:{type:"text",size:"mini"}},[e._v(e._s(e.$t("CloseRight")))])],1),t("li",{on:{click:function(t){return e.closeTabs("other")}}},[t("el-button",{attrs:{type:"text",size:"mini"}},[e._v(e._s(e.$t("CloseOther")))])],1),t("li",{on:{click:function(t){return e.closeTabs("all")}}},[t("el-button",{attrs:{type:"text",size:"mini"}},[e._v(e._s(e.$t("CloseAll")))])],1)],1)])],1)},Qe=[],Ze=(n("9e1f"),n("6ed5")),et=n.n(Ze),tt=n("b85c"),nt=(n("4de4"),n("14d9"),n("aa47")),ot=n("93bf"),st=n.n(ot),rt=function(){var e=this,t=e._self._c;return t("div",[t("div",{attrs:{id:e.id}})])},it=[],at=n("fcf3"),lt=n("47d0"),ct=n("173c"),ut={name:"Terminal",props:["id"],data:function(){return{term:null,ws:null,resetClose:!1,ssh:null,savePass:!1,fontSize:15}},mounted:function(){this.createTerm()},methods:{setSSH:function(){this.$store.commit("SET_SSH",this.ssh)},resizeTerm:function(e){var t=document.body.clientWidth;e.style.height=t<600?document.body.clientHeight-301+"px":t>=600&&t<1e3?document.body.clientHeight-151+"px":document.body.clientHeight-101+"px"},createTerm:function(){var e=this;if(""!==this.$store.state.sshInfo.password){var t=document.getElementById(this.id);this.resizeTerm(t);var n=this.$store.getters.sshReq,o=this.$store.getters.token;this.close();var s=""+(Le.getters.ctx?Le.getters.ctx:""),r=new lt["FitAddon"];this.term=new at["Terminal"]({rendererType:"canvas",convertEol:!0,disableStdin:!1,cursorBlink:!0,cursorStyle:"block",logLevel:"info",scrollback:800,windowsMode:!0}),this.term.loadAddon(r),this.term.open(document.getElementById(this.id));try{r.fit()}catch(h){}var i=this,a={timeout:15e3,intervalObj:null,stop:function(){clearInterval(this.intervalObj)},start:function(){this.intervalObj=setInterval((function(){null!==i.ws&&1===i.ws.readyState&&i.ws.send("ping")}),this.timeout)}},l="已超时关闭!";"en"===this.$store.state.language&&(l="Connection timed out!"),this.ws=Ve.newWs({url:"".concat("http:"===location.protocol?"ws":"wss","://").concat(location.host).concat(s,"/webssh/term?token=").concat(o,"&sshInfo=").concat(n,"&rows=").concat(this.term.rows,"&cols=").concat(this.term.cols,"&closeTip=").concat(l)}),this.ws.onopen=function(){console.log(Date(),"onopen"),i.connected(),a.start()},this.ws.onclose=function(){console.log(Date(),"onclose"),i.resetClose||(e.savePass||(e.$store.commit("SET_PASS",""),e.ssh.password=""),e.$message({message:e.$t("wsClose"),type:"warning",duration:0,showClose:!0}),e.ws=null),a.stop(),i.resetClose=!1},this.ws.onerror=function(){console.log(Date(),"onerror")};var c=new ct["AttachAddon"](this.ws);this.term.loadAddon(c);var u=this.term;u.focus(),this.term.attachCustomKeyEventHandler((function(e){var t=["F5","F11","F12"];return!(t.indexOf(e.key)>-1)&&(e.ctrlKey&&"v"===e.key||e.ctrlKey&&"c"===e.key&&i.term.hasSelection()?(document.execCommand("copy"),!1):void 0)}));var d="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";t.addEventListener(d,(function(t){if(t.ctrlKey){t.preventDefault(),t.deltaY<0?i.term.setOption("fontSize",++e.fontSize):i.term.setOption("fontSize",--e.fontSize);try{r.fit()}catch(t){}null!==i.ws&&1===i.ws.readyState&&i.ws.send("resize:".concat(i.term.rows,":").concat(i.term.cols))}})),window.addEventListener("resize",(function(){i.resizeTerm(t);try{r.fit()}catch(h){}null!==i.ws&&1===i.ws.readyState&&i.ws.send("resize:".concat(i.term.rows,":").concat(i.term.cols))}))}},connected:function(){var e=this;return Object(ie["a"])(Object(re["a"])().mark((function t(){var n,o,s,r;return Object(re["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$store.state.sshInfo,e.ssh=Object.assign({},n),t.next=4,je(e.$store.getters.sshReq,e.$store.state.token);case 4:if(o=t.sent,"success"===o.msg){t.next=9;break}return t.abrupt("return");case 9:e.savePass=o.data.savePass;case 10:document.title=n.host,s=e.$store.state.sshList,null===s?s=e.savePass?'[{"host": "'.concat(n.host,'", "username": "').concat(n.username,'", "port":').concat(n.port,', "logintype":').concat(n.logintype,', "password":"').concat(n.password,'"}]'):'[{"host": "'.concat(n.host,'", "username": "').concat(n.username,'", "port":').concat(n.port,',  "logintype":').concat(n.logintype,"}]"):(r=JSON.parse(window.atob(s)),r.forEach((function(e,t){e.host===n.host&&e.logintype===n.logintype&&r.splice(t,1)})),r.push({host:n.host,username:n.username,port:n.port,logintype:n.logintype}),e.savePass&&(r[r.length-1].password=n.password),s=JSON.stringify(r)),e.$store.commit("SET_LIST",window.btoa(s));case 14:case"end":return t.stop()}}),t)})))()},close:function(){null!==this.ws&&(this.ws.close(),this.resetClose=!0),null!==this.term&&this.term.dispose()}},beforeDestroy:function(){this.close()}},dt=ut,ht=Object(De["a"])(dt,rt,it,!1,null,null,null),pt=ht.exports,mt={name:"Tabs",components:{terminal:pt},data:function(){return{currentTermId:"",currentTerm:"",currentTermIndex:0,menuTab:"",contextMenuVisible:!1,left:"",top:""}},computed:{termList:{get:function(){return this.$store.state.termList},set:function(e){this.$store.commit("SET_TERMLIST",e)}}},watch:{contextMenuVisible:function(){this.contextMenuVisible?document.body.addEventListener("click",this.closeContextMenu):document.body.removeEventListener("click",this.closeContextMenu)}},mounted:function(){for(var e=document.body.getElementsByClassName("el-tabs__nav-scroll"),t=0;t<e.length;++t)e[t].oncontextmenu=this.openContextMenu;var n=this,o=document.querySelector(".el-tabs__nav");nt["a"].create(o,{animation:200,onEnd:function(e){var t=e.newIndex,o=e.oldIndex,s=n.termList.splice(o,1)[0];n.termList.splice(t,0,s)}})},methods:{lockButtonShow:function(e){if(this.termList.length>0&&""!==e){var t=this.termList.filter((function(t){return t.name===e}))[0];return void 0===t||t.closable?this.$t("Lock"):this.$t("Unlock")}return this.$t("Lock")},copyTab:function(){this.$refs["".concat(this.menuTab)][0].setSSH(),this.openTerm()},setScreenfull:function(){if(!st.a.isEnabled)return this.$message({message:"not support fullscreen",type:"warning"}),!1;st.a.toggle()},getCurrMenuIndex:function(e){var t=this,n=0;return this.termList.forEach((function(o,s){(e&&o.name===e.name||o.name===t.menuTab)&&(n=s)})),n},closeTabs:function(e){var t=this,n=function(){t.currentTermIndex=s;var e=t.termList[s];t.currentTerm=e.name,document.title=e.label,t.$store.commit("SET_TAB",t.termList[t.currentTermIndex]),t.$refs["".concat(e.name)][0].setSSH()},o=function(e,n){var o=[];t.termList.forEach((function(t,s){(s>=e&&s<n||!t.closable)&&o.push(t)})),t.termList=o},s=this.getCurrMenuIndex();switch(e){case"left":this.currentTermIndex<s&&n(),o(s,this.termList.length);break;case"right":this.currentTermIndex>s&&n(),o(0,s+1);break;case"other":this.currentTermIndex!==s&&n(),o(s,s+1);break;case"all":o(-1,-1),s=this.getCurrMenuIndex(),n();break}this.closeContextMenu()},closeContextMenu:function(){this.contextMenuVisible=!1},openContextMenu:function(e){e.preventDefault();var t=e.srcElement?e.srcElement:e.target;t.id&&(this.menuTab=t.id.substr(4),this.contextMenuVisible=!0,this.left=e.clientX,this.top=20)},genID:function(e){return Number(Math.random().toString().substr(3,e)+Date.now()).toString(36)},openTerm:function(){var e=this.$store.state.sshInfo;if(""!==e.password){var t="".concat(this.genID(10));this.termList.push({name:"".concat(e.host,"-").concat(t),label:e.host,path:"/",closable:!0,id:t});var n=this.termList[this.termList.length-1];this.currentTerm=n.name,this.currentTermId=n.id,this.currentTermIndex=this.termList.length-1,this.$store.commit("SET_TAB",this.termList[this.currentTermIndex])}},findTerm:function(e){this.currentTermIndex=this.getCurrMenuIndex(e),this.$store.commit("SET_TAB",this.termList[this.currentTermIndex])},clickTab:function(e){this.$refs["".concat(e.name)][0].setSSH(),document.title=e.label,this.findTerm(e)},removeTab:function(e){for(var t=this.currentTerm,n=0;n<this.termList.length;++n)if(e==this.termList[n].name){if(!this.termList[n].closable)return void this.$message({message:this.$t("unlockClose"),type:"warning"});var o=this.termList[n+1]||this.termList[n-1];o&&(t=o.name)}this.currentTerm=t,this.$refs["".concat(this.currentTerm)][0].setSSH(),this.termList=this.termList.filter((function(t){return t.name!==e})),this.findTerm()},renameTab:function(){var e=this;return Object(ie["a"])(Object(re["a"])().mark((function t(){var n,o,s,r,i;return Object(re["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object(tt["a"])(e.termList),t.prev=1,n.s();case 3:if((o=n.n()).done){t.next=15;break}if(s=o.value,s.name!==e.menuTab){t.next=13;break}return t.next=8,et.a.prompt("",e.$t("Rename"),{inputValue:s.label,inputErrorMessage:"please input value",inputValidator:function(e){return null!==e&&e.length>0}}).catch(null);case 8:return r=t.sent,i=r.value,s.label=i,e.currentTerm===e.menuTab&&(document.title=s.label),t.abrupt("break",15);case 13:t.next=3;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[1,17,20,23]])})))()},lockTab:function(){var e,t=Object(tt["a"])(this.termList);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.name===this.menuTab&&(n.closable=!n.closable)}}catch(o){t.e(o)}finally{t.f()}}}},ft=mt,gt=(n("5502"),Object(De["a"])(ft,Ye,Qe,!1,null,"51dadbd7",null)),bt=gt.exports,vt={name:"App",components:{vheader:Xe,tabs:bt}},wt=vt,yt=(n("0c06"),Object(De["a"])(wt,ee,te,!1,null,null,null)),kt=yt.exports;n("abb2");o["default"].use(Z),o["default"].config.productionTip=!1,new o["default"]({el:"#app",i18n:ke,store:Le,render:function(e){return e(kt)}})},"7cd7":function(e,t,n){"use strict";n("00c0")},8533:function(e,t,n){},b20f:function(e,t,n){}});